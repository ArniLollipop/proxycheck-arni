(function(){"use strict";var e={7540:function(e,t,r){var s=r(2856),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[t("b-navbar-brand",[e._v(" Proxy Management "),t("b-badge",[e._v("v2.0")])],1),t("b-navbar-nav",[t("b-nav-item",{attrs:{to:"/"}},[e._v("Proxy")]),t("b-nav-item",{attrs:{to:"/ip_logs"}},[e._v("IP History")]),t("b-nav-item",{attrs:{to:"/speed_logs"}},[e._v("Speed History")]),t("b-nav-item",{attrs:{to:"/visit_logs"}},[e._v("Visit History")])],1)],1),t("router-view")],1)},o=[],i=r(1656),n={},l=(0,i.A)(n,a,o,!1,null,null,null),c=l.exports,p=r(1594),d=function(){var e=this,t=e._self._c;return t("div",[t("b-card",{staticClass:"m-2",attrs:{"bg-variant":"light"}},[t("ProxySettings")],1),t("b-cart",{staticClass:"m-2",attrs:{title:"Proxy List"}},[t("ProxyList")],1)],1)},u=[],f=function(){var e=this,t=e._self._c;return t("b-form",{attrs:{inline:""},on:{submit:function(t){return t.preventDefault(),e.saveSettings.apply(null,arguments)}}},[t("h4",{staticClass:"mr-3"},[e._v("Settings")]),t("label",{staticClass:"mr-1",attrs:{for:"settings-url"}},[e._v("URL")]),t("b-form-input",{staticClass:"mr-2",staticStyle:{width:"200px"},attrs:{id:"settings-url",type:"text"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),t("label",{staticClass:"mr-1",attrs:{for:"settings-timeout"}},[e._v("Timeout")]),t("b-form-input",{staticClass:"mr-2",staticStyle:{width:"80px"},attrs:{id:"settings-timeout",type:"number"},model:{value:e.timeout,callback:function(t){e.timeout=e._n(t)},expression:"timeout"}}),t("label",{staticClass:"mr-1",attrs:{for:"settings-check-ip-interval"}},[e._v("CheckIP Interval")]),t("b-form-input",{staticClass:"mr-2",staticStyle:{width:"80px"},attrs:{id:"settings-check-ip-interval",type:"number"},model:{value:e.checkIPInterval,callback:function(t){e.checkIPInterval=e._n(t)},expression:"checkIPInterval"}}),t("label",{staticClass:"mr-1",attrs:{for:"settings-speed-check-interval"}},[e._v("Speed Check Interval")]),t("b-form-input",{staticClass:"mr-2",staticStyle:{width:"80px"},attrs:{id:"settings-speed-check-interval",type:"number"},model:{value:e.speedCheckInterval,callback:function(t){e.speedCheckInterval=e._n(t)},expression:"speedCheckInterval"}}),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Save")])],1)},h=[];async function m(e){const t=await e.json();if(!e.ok)throw new Error(t.error||"An unknown error occurred");return t.data}async function y(){const e=await fetch("/api/settings");return await m(e)}async function b(e){const t=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return m(t)}var g={name:"ProxySettings",data(){return{url:"",timeout:0,checkIPInterval:0,speedCheckInterval:0}},async created(){await this.loadSettings()},methods:{async loadSettings(){try{const e=await y();console.log("Loaded settings:",e),this.url=e.url,this.timeout=e.timeout,this.checkIPInterval=e.checkIPInterval,this.speedCheckInterval=e.speedCheckInterval}catch(e){console.error("Failed to load settings:",e),alert("Failed to load settings.")}},async saveSettings(){try{const e={Url:this.url,Timeout:this.timeout,CheckIPInterval:this.checkIPInterval,SpeedCheckInterval:this.speedCheckInterval};await b(e),alert("Settings saved successfully!")}catch(e){console.error("Failed to save settings:",e),alert("Failed to save settings.")}}}},x=g,v=(0,i.A)(x,f,h,!1,null,"f50f36d2",null),w=v.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card p-3"},[t("div",{staticClass:"d-flex justify-content-between flex-wrap mb-3"},[t("b-button-group",[t("b-button",{attrs:{variant:"primary"},on:{click:e.onNew}},[e._v("New")]),t("b-button",{attrs:{variant:"secondary"},on:{click:e.onImport}},[e._v(" Import")]),t("b-button",{attrs:{variant:"success"},on:{click:e.onExport}},[e._v(" Export")]),t("b-button",{attrs:{variant:"info"},on:{click:e.onExportSelected}},[e._v(" Export Selected")]),t("b-button",{attrs:{variant:"info"},on:{click:e.onVerifySelected}},[e._v(" Verify Selected")]),t("b-button",{attrs:{variant:"danger"},on:{click:e.onDeleteSelected}},[e._v(" Delete Selected")])],1),t("b-form",{attrs:{inline:""}},[t("b-input-group",{staticClass:"flex-grow-1",attrs:{size:"sm"},scopedSlots:e._u([{key:"append",fn:function(){return[t("b-input-group-text",[t("b-icon",{attrs:{icon:"search"}})],1)]},proxy:!0}])},[t("b-form-input",{attrs:{placeholder:"Search...",size:"sm"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("b-form-select",{staticClass:"mr-2",attrs:{options:e.portOptions,size:"sm"},model:{value:e.filters.port,callback:function(t){e.$set(e.filters,"port",t)},expression:"filters.port"}}),t("b-form-select",{staticClass:"mr-2",attrs:{options:e.operatorOptions,size:"sm"},model:{value:e.filters.operator,callback:function(t){e.$set(e.filters,"operator",t)},expression:"filters.operator"}})],1)],1),t("b-table",{ref:"selectableTable",attrs:{items:e.filteredData,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,small:"",responsive:"sm",selectable:"","select-mode":"multi"},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"cell(actions)",fn:function(r){return[t("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:()=>e.onVerify(r.item)}},[e._v("Verify")]),t("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:()=>e.onChange(r.item)}},[e._v("Details/Change")]),t("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:()=>e.onDelete(r.item)}},[e._v("Delete")])]}},{key:"cell(selected)",fn:function({rowSelected:r}){return[r?[t("b-icon",{attrs:{icon:"check"}})]:[t("span",{attrs:{"aria-hidden":"true"}},[e._v(" ")])]]}}])}),t("div",{staticClass:"d-flex justify-content-between align-items-center mt-3"},[t("small",[e._v(e._s(e.filteredData.length)+" results")]),t("b-pagination",{attrs:{"total-rows":e.filteredData.length,"per-page":e.perPage,size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),t("ProxySettingsModal",{attrs:{title:"New Proxy"},on:{"proxy-created":e.handleProxyCreated,hidden:e.onModalHidden},model:{value:e.newModalShown,callback:function(t){e.newModalShown=t},expression:"newModalShown"}}),t("ProxySettingsModal",{attrs:{title:"Edit Proxy",proxy:e.proxyToEdit},on:{"proxy-updated":e.handleProxyUpdated,hidden:e.onModalHidden},model:{value:e.editModalShown,callback:function(t){e.editModalShown=t},expression:"editModalShown"}}),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.handleFileSelected}})],1)},k=[],_=(r(8111),r(2489),r(1701),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{visible:e.show,title:e.title},on:{change:t=>e.$emit("change",t),hidden:e.resetForm,ok:e.handleOk,cancel:e.handleCancel}},[t("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"IP:"}},[t("b-form-input",{attrs:{required:""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}})],1),t("b-form-group",{attrs:{label:"Port:"}},[t("b-form-input",{attrs:{required:""},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1),t("b-form-group",{attrs:{label:"Username:"}},[t("b-form-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("b-form-group",{attrs:{label:"Password:"}},[t("b-form-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("b-form-group",{attrs:{label:"Name:"}},[t("b-form-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("b-form-group",{attrs:{label:"Phone:"}},[t("b-form-input",{model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t("b-form-group",{attrs:{label:"Contacts:"}},[t("b-form-textarea",{attrs:{"max-rows":"5",rows:"3"},model:{value:e.contacts,callback:function(t){e.contacts=t},expression:"contacts"}})],1)],1)])}),S=[];r(7588),r(4603),r(7566),r(8721);async function C(e){const t=await e.json();if(!e.ok)throw new Error(t.error||"An unknown error occurred");return t.data}async function L(){const e=await fetch("/api/proxy");return C(e)}async function I(e){const t=await fetch("/api/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return C(t)}async function O(e,t){const r=await fetch(`/api/proxy/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return C(r)}async function F(e){const t=await fetch(`/api/proxy/${e}`,{method:"DELETE"});return C(t)}async function $(e){const t=await fetch(`/api/proxy/${e}/verify`);return C(t)}async function D(e){const t=await fetch(`/api/proxy/verify-batch?ids=${e.join(",")}`,{method:"POST"});return C(t)}async function N(e){const t=new FormData;t.append("file",e);const r=await fetch("api/import",{method:"POST",body:t}),s=await r.json();if(!r.ok)throw new Error(s.error||"Failed to import proxies");return s}async function E(e,t){if(!e.ok){const t=await e.json().catch(()=>({error:"Failed to download file"}));throw new Error(t.error)}const r=e.headers.get("Content-Disposition");let s=t;if(r&&r.includes("attachment")){const e=/filename="([^"]+)"/.exec(r);e&&e[1]&&(s=e[1])}const a=await e.blob(),o=window.URL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=o,i.download=s,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(o),document.body.removeChild(i)}async function j(){const e=await fetch("/api/export/all");await E(e,"proxies.csv")}async function R(e){if(!e||0===e.length)throw new Error("No proxy IDs provided for export.");const t=await fetch(`/api/export/selected?ids=${e.join(",")}`);await E(t,"selected_proxies.csv")}async function T(e){try{const t=new URL("/api/speedLogs",window.location.origin);e&&Object.keys(e).forEach(r=>{null!==e[r]&&void 0!==e[r]&&t.searchParams.append(r,e[r])});const r=await fetch(t);return await r.json()}catch(t){throw console.error("Failed to fetch speed logs:",t),t}}async function z(e){try{const t=new URL("/api/ipLogs",window.location.origin);e&&Object.keys(e).forEach(r=>{null!==e[r]&&void 0!==e[r]&&t.searchParams.append(r,e[r])});const r=await fetch(t);return await r.json()}catch(t){throw console.error("Failed to fetch IP logs:",t),t}}var A={name:"ProxySettingsModal",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},title:String,proxy:Object},watch:{proxy(e){e?(this.ip=e.ip||"",this.port=e.port||"",this.username=e.username||"",this.password=e.password||"",this.name=e.name||"",this.phone=e.phone||"",this.contacts=e.contacts||""):this.resetForm()}},data(){return{ip:"",port:"",username:"",password:"",name:"",phone:"",contacts:""}},methods:{resetForm(){this.ip="",this.port="",this.username="",this.password="",this.name="",this.phone="",this.contacts=""},handleOk(e){e.preventDefault(),this.handleSubmit()},handleCancel(){this.$emit("change",!1)},async handleSubmit(){const e={ip:this.ip,port:this.port,username:this.username,password:this.password,name:this.name,phone:this.phone,contacts:this.contacts};try{let t;this.proxy&&this.proxy.id?(t=await O(this.proxy.id,e),this.$emit("proxy-updated",t)):(t=await I(e),this.$emit("proxy-created",t)),this.$emit("change",!1)}catch(t){console.error("Failed to save proxy:",t),alert("Не удалось сохранить прокси. Пожалуйста, проверьте консоль для деталей.")}}}},B=A,M=(0,i.A)(B,_,S,!1,null,"2a5de69f",null),U=M.exports,V={name:"ProxyList",components:{ProxySettingsModal:U},data(){return{search:"",proxies:[],selectedRows:[],newModalShown:!1,editModalShown:!1,proxyToEdit:null,pendingProxy:null,filters:{port:null,operator:null},currentPage:1,perPage:15,fields:[{key:"selected",label:"",selectable:!0},{key:"name",label:"Name",sortable:!0},{key:"ip",label:"IP",sortable:!0},{key:"port",label:"Port",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"realIP",label:"Real IP",sortable:!0},{key:"username",label:"Username"},{key:"password",label:"Password"},{key:"operator",label:"Operator",sortable:!0},{key:"lastStatus",label:"Status",sortable:!0},{key:"lastLatency",label:"Latency (ms)",sortable:!0},{key:"speed",label:"Speed (kb/s)",sortable:!0},{key:"failures",label:"Failures",sortable:!0},{key:"actions",label:"Actions"}]}},computed:{portOptions(){const e=[...new Set(this.proxies.map(e=>e.port))],t=e.map(e=>({value:e,text:e}));return[{value:null,text:"Port"},...t]},operatorOptions(){const e=[...new Set(this.proxies.map(e=>e.operator).filter(Boolean))],t=e.map(e=>({value:e,text:e}));return[{value:null,text:"Operator"},...t]},filteredData(){return this.proxies.filter(e=>{let t=!0;const r=this.search.toLowerCase();return t=!r||(e.name.toLowerCase().includes(r)||e.ip.toLowerCase().includes(r)||e.port.toLowerCase().includes(r)||e.phone.toLowerCase().includes(r)||e.operator.toLowerCase().includes(r)),t=this.filters.port?e.port===this.filters.port:t,t=this.filters.operator?e.operator===this.filters.operator:t,t})}},methods:{handleProxyCreated(e){this.pendingProxy=e},handleProxyUpdated(e){this.pendingProxy=e},onNew(){this.newModalShown=!0},onImport(){this.$refs.fileInput.click()},async handleFileSelected(e){const t=e.target.files[0];if(t)try{const e=await N(t);alert(`Import finished. Imported: ${e.importedCount}, Failed: ${e.failedCount}`),this.proxies=await L()}catch(r){console.error("Failed to import proxies:",r),alert("Failed to import proxies.")}finally{e.target.value=""}},async onExport(){try{await j()}catch(e){console.error("Failed to export all proxies:",e),alert("Failed to export proxies.")}},async onExportSelected(){const e=this.selectedRows.map(e=>e.id);if(0!==e.length)try{await R(e)}catch(t){console.error("Failed to export selected proxies:",t),alert("Failed to export selected proxies.")}else alert("No proxies selected for export.")},async onVerifySelected(){const e=this.selectedRows.map(e=>e.id);if(0!==e.length)try{await D(e),alert("Proxies verified successfully"),this.proxies=await L(),this.$refs.selectableTable.clearSelected()}catch(t){console.error("Failed to verify selected proxies:",t),alert("Failed to verify selected proxies.")}else alert("No proxies selected")},async onDeleteSelected(){const e=this.selectedRows.map(e=>e.id);if(0!==e.length){if(confirm(`Are you sure you want to delete ${e.length} selected proxies?`))try{for(const t of e)await F(t)}catch(t){console.error("An error occurred during batch deletion:",t),alert("An error occurred while deleting proxies. The operation was interrupted.")}finally{this.proxies=await L(),this.$refs.selectableTable.clearSelected()}}else alert("No proxies selected")},async onVerify(e){try{await $(e.id),this.proxies=await L()}catch(t){console.error(`Failed to verify proxy ${e.id}:`,t),alert(`Failed to verify proxy ${e.ip}:${e.port}.`)}},onChange(e){this.proxyToEdit=e,this.editModalShown=!0},onReset(e){alert("Reset: "+e.ipPort)},async onDelete(e){if(confirm(`Are you sure you want to delete proxy ${e.ip}:${e.port}?`))try{await F(e.id),this.proxies=await L()}catch(t){console.error(`Failed to delete proxy ${e.id}:`,t),alert(`Failed to delete proxy ${e.ip}:${e.port}.`)}},onRowSelected(e){this.selectedRows=e},onModalHidden(){this.$nextTick(()=>{if(this.pendingProxy){const e=this.proxies.findIndex(e=>e.id===this.pendingProxy.id);-1!==e?this.$set(this.proxies,e,this.pendingProxy):this.proxies.unshift(this.pendingProxy)}this.proxyToEdit=null,this.pendingProxy=null})}},async created(){const e=await L();this.proxies=e}},H=V,J=(0,i.A)(H,P,k,!1,null,"ccd8b3ba",null),q=J.exports,W={name:"ProxyView",components:{ProxySettings:w,ProxyList:q}},G=W,K=(0,i.A)(G,d,u,!1,null,null,null),Y=K.exports,Q=function(){var e=this,t=e._self._c;return t("div",[t("b-cart",{staticClass:"m-2",attrs:{title:"Proxy List"}},[t("LogList")],1)],1)},X=[],Z=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",{staticClass:"mb-2",attrs:{"align-h":"between"}},[t("b-col",{attrs:{cols:"auto"}},[t("b-button-group",[t("b-button",{attrs:{variant:"success",size:"sm"},on:{click:e.onNew}},[e._v("Process Logs ")]),t("b-button",{attrs:{variant:"info",size:"sm"},on:{click:e.onExport}},[e._v("Export")])],1)],1),t("b-col",{attrs:{cols:"auto"}},[t("b-input-group",{staticClass:"w-100",attrs:{size:"sm"}},[t("b-form-input",{attrs:{placeholder:"Search by  IP, domain",type:"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("b-input-group-append",[t("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(t){e.search=""}}},[e._v("Clear")])],1),t("b-form-select",{attrs:{options:e.proxyList},model:{value:e.filters.proxyName,callback:function(t){e.$set(e.filters,"proxyName",t)},expression:"filters.proxyName"}})],1)],1)],1),t("b-table",{attrs:{items:e.filteredLogs,fields:e.fields,small:"",responsive:"",striped:"",hover:""},scopedSlots:e._u([{key:"cell(actions)",fn:function(r){return[t("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.viewRaw(r.item)}}},[e._v("View RAW Log")])]}}])}),t("b-pagination",{staticClass:"my-2",attrs:{"per-page":e.perPage,"total-rows":e.filteredLogs.length,align:"center",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},ee=[],te={data(){return{search:"",filters:{proxyName:"",ip:"",tag:""},perPage:10,currentPage:1,logs:[{datetime:"2025-10-31 09:00:00",sourceIP:"192.168.1.1",targetIP:"10.0.0.1",port:"443",domain:"example.com",proxyName:"Proxy-1",tag:"Main"},{datetime:"2025-10-31 09:10:12",sourceIP:"192.168.1.2",targetIP:"10.0.0.2",port:"8080",domain:"test.org",proxyName:"Proxy-2",tag:"Backup"}],proxyList:[{value:"",text:"Proxy"},{value:"8080",text:"Proxy1"},{value:"9090",text:"Proxy2"}],fields:[{key:"datetime",label:"Date/Time",sortable:!0},{key:"sourceIP",label:"Source IP",sortable:!0},{key:"targetIP",label:"Target IP",sortable:!0},{key:"port",label:"Port",sortable:!0},{key:"domain",label:"Domain",sortable:!0},{key:"actions",label:"Actions"}]}},computed:{filteredLogs(){const e=this.search.toLowerCase();return this.logs.filter(t=>(!this.filters.proxyName||t.proxyName.toLowerCase().includes(this.filters.proxyName.toLowerCase()))&&(!this.filters.ip||t.sourceIP.includes(this.filters.ip)||t.targetIP.includes(this.filters.ip))&&(!this.filters.tag||t.tag.toLowerCase().includes(this.filters.tag.toLowerCase()))&&(!e||t.proxyName.toLowerCase().includes(e)||t.sourceIP.includes(e)||t.targetIP.includes(e)||t.domain.toLowerCase().includes(e)||t.tag.toLowerCase().includes(e)))}},methods:{viewRaw(e){alert(`RAW log for ${e.domain} (from ${e.sourceIP} to ${e.targetIP})`)},onNew(){alert("New log clicked")},onImport(){alert("Import clicked")},onExport(){alert("Export clicked")},onExportSelected(){alert("Export selected clicked")}}},re=te,se=(0,i.A)(re,Z,ee,!1,null,null,null),ae=se.exports,oe={name:"LogView",components:{LogList:ae}},ie=oe,ne=(0,i.A)(ie,Q,X,!1,null,null,null),le=ne.exports,ce=function(){var e=this,t=e._self._c;return t("div",[t("b-card",{staticClass:"m-2",attrs:{title:"Speed History"}},[t("SpeedLogList")],1)],1)},pe=[],de=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card p-3"},[t("b-form",{staticClass:"d-flex justify-content-start flex-wrap mb-3",on:{submit:function(t){return t.preventDefault(),e.applyFilters.apply(null,arguments)}}},[t("b-form-group",{staticClass:"mr-2",attrs:{label:"Proxy","label-for":"proxy-filter"}},[t("b-form-select",{attrs:{id:"proxy-filter",options:e.proxyOptions,size:"sm"},model:{value:e.filters.proxy_id,callback:function(t){e.$set(e.filters,"proxy_id",t)},expression:"filters.proxy_id"}})],1),t("b-form-group",{staticClass:"mr-2",attrs:{label:"Start Date","label-for":"start-date-filter"}},[t("b-form-datepicker",{attrs:{id:"start-date-filter",size:"sm"},model:{value:e.filters.start_date,callback:function(t){e.$set(e.filters,"start_date",t)},expression:"filters.start_date"}})],1),t("b-form-group",{staticClass:"mr-2",attrs:{label:"End Date","label-for":"end-date-filter"}},[t("b-form-datepicker",{attrs:{id:"end-date-filter",size:"sm"},model:{value:e.filters.end_date,callback:function(t){e.$set(e.filters,"end_date",t)},expression:"filters.end_date"}})],1),t("div",{staticClass:"d-flex align-items-end"},[t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary",size:"sm"}},[e._v("Apply")]),t("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:e.resetFilters}},[e._v("Reset")])],1)],1),t("b-table",{attrs:{items:e.logs,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,busy:e.isBusy,small:"",responsive:"sm"},on:{"update:busy":function(t){e.isBusy=t},"sort-changed":e.handleSort},scopedSlots:e._u([{key:"cell(proxy_name)",fn:function({item:t}){return[e._v(e._s(e.getProxyName(t.proxy_id)))]}},{key:"cell(timestamp)",fn:function({value:t}){return[e._v(e._s(new Date(t).toLocaleString()))]}},{key:"cell(speed)",fn:function({value:t}){return[e._v(e._s(t)+" KB/s")]}}])}),t("div",{staticClass:"d-flex justify-content-between align-items-center mt-3"},[t("small",[e._v(e._s(e.totalRows)+" results")]),t("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,size:"sm"},on:{change:e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},ue=[],fe=(r(4114),r(116),{name:"SpeedLogList",data(){return{logs:[],isBusy:!1,filters:{proxy_id:null,start_date:"",end_date:""},proxyOptions:[{value:null,text:"All Proxies"}],currentPage:1,perPage:15,totalRows:0,sortBy:"timestamp",sortDesc:!0,fields:[{key:"proxy_name",label:"Proxy Name",sortable:!1},{key:"timestamp",label:"Date/Time",sortable:!0},{key:"speed",label:"Speed",sortable:!0}]}},async created(){await this.loadProxies(),await this.fetchLogs()},methods:{async fetchLogs(){this.isBusy=!0;try{const e={page:this.currentPage,page_size:this.perPage,sort_field:this.sortBy,sort_desc:this.sortDesc,...this.filters};Object.keys(e).forEach(t=>{null!==e[t]&&""!==e[t]||delete e[t]});const{data:t,total:r}=await T(e);this.logs=t,this.totalRows=r}catch(e){alert("Failed to load speed logs.")}finally{this.isBusy=!1}},getProxyName(e){const t=this.proxyOptions.find(t=>t.value===e);return t?t.text:"Unknown"},async loadProxies(){try{const e=await L();this.proxyOptions.push(...e.map(e=>({value:e.id,text:e.name})))}catch(e){console.error("Failed to load proxies for filter:",e)}},applyFilters(){this.currentPage=1,this.fetchLogs()},resetFilters(){this.filters={proxy_id:null,start_date:"",end_date:""},this.applyFilters()},handlePageChange(e){this.currentPage=e,this.fetchLogs()},handleSort(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.currentPage=1,this.fetchLogs()}}}),he=fe,me=(0,i.A)(he,de,ue,!1,null,"0907a978",null),ye=me.exports,be={name:"SpeedLogView",components:{SpeedLogList:ye}},ge=be,xe=(0,i.A)(ge,ce,pe,!1,null,null,null),ve=xe.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("b-card",{staticClass:"m-2",attrs:{title:"IP Change History"}},[t("IpLogList")],1)],1)},Pe=[],ke=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card p-3"},[t("h4",[e._v("IP Change History")]),t("b-form",{staticClass:"d-flex justify-content-start flex-wrap mb-3",on:{submit:function(t){return t.preventDefault(),e.applyFilters.apply(null,arguments)}}},[t("b-form-group",{staticClass:"mr-2",attrs:{label:"Proxy","label-for":"proxy-filter"}},[t("b-form-select",{attrs:{id:"proxy-filter",options:e.proxyOptions,size:"sm"},model:{value:e.filters.proxy_id,callback:function(t){e.$set(e.filters,"proxy_id",t)},expression:"filters.proxy_id"}})],1),t("b-form-group",{staticClass:"mr-2",attrs:{label:"Start Date","label-for":"start-date-filter"}},[t("b-form-datepicker",{attrs:{id:"start-date-filter",size:"sm"},model:{value:e.filters.start_date,callback:function(t){e.$set(e.filters,"start_date",t)},expression:"filters.start_date"}})],1),t("b-form-group",{staticClass:"mr-2",attrs:{label:"End Date","label-for":"end-date-filter"}},[t("b-form-datepicker",{attrs:{id:"end-date-filter",size:"sm"},model:{value:e.filters.end_date,callback:function(t){e.$set(e.filters,"end_date",t)},expression:"filters.end_date"}})],1),t("div",{staticClass:"d-flex align-items-end"},[t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary",size:"sm"}},[e._v("Apply")]),t("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:e.resetFilters}},[e._v("Reset")])],1)],1),t("b-table",{attrs:{items:e.logs,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,busy:e.isBusy,small:"",responsive:"sm"},on:{"update:busy":function(t){e.isBusy=t},"sort-changed":e.handleSort},scopedSlots:e._u([{key:"cell(proxy_name)",fn:function({item:t}){return[e._v(e._s(e.getProxyName(t.proxy_id)))]}},{key:"cell(timestamp)",fn:function({value:t}){return[e._v(e._s(new Date(t).toLocaleString()))]}}])}),t("div",{staticClass:"d-flex justify-content-between align-items-center mt-3"},[t("small",[e._v(e._s(e.totalRows)+" results")]),t("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,size:"sm"},on:{change:e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},_e=[],Se={name:"IpLogList",data(){return{logs:[],isBusy:!1,filters:{proxy_id:null,start_date:"",end_date:""},proxyOptions:[{value:null,text:"All Proxies"}],currentPage:1,perPage:15,totalRows:0,sortBy:"timestamp",sortDesc:!0,fields:[{key:"proxy_name",label:"Proxy Name",sortable:!1},{key:"timestamp",label:"Date/Time",sortable:!0},{key:"ip",label:"New IP",sortable:!0},{key:"old_ip",label:"Old IP",sortable:!1},{key:"country",label:"New Country",sortable:!0},{key:"old_country",label:"Old Country",sortable:!1},{key:"isp",label:"New ISP",sortable:!0},{key:"old_isp",label:"Old ISP",sortable:!1}]}},async created(){await this.loadProxies(),await this.fetchLogs()},methods:{async fetchLogs(){this.isBusy=!0;try{const e={page:this.currentPage,page_size:this.perPage,sort_field:this.sortBy,sort_desc:this.sortDesc,...this.filters};Object.keys(e).forEach(t=>{null!==e[t]&&""!==e[t]||delete e[t]});const{data:t,total:r}=await z(e);this.logs=t,this.totalRows=r}catch(e){alert("Failed to load IP logs.")}finally{this.isBusy=!1}},getProxyName(e){const t=this.proxyOptions.find(t=>t.value===e);return t?t.text:"Unknown"},async loadProxies(){try{const e=await L();this.proxyOptions.push(...e.map(e=>({value:e.id,text:e.name}))),console.log("Loaded proxies:",e)}catch(e){console.error("Failed to load proxies for filter:",e)}},applyFilters(){this.currentPage=1,this.fetchLogs()},resetFilters(){this.filters={proxy_id:null,start_date:"",end_date:""},this.applyFilters()},handlePageChange(e){this.currentPage=e,this.fetchLogs()},handleSort(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.currentPage=1,this.fetchLogs()}}},Ce=Se,Le=(0,i.A)(Ce,ke,_e,!1,null,"50f7644c",null),Ie=Le.exports,Oe={name:"IpLogView",components:{IpLogList:Ie}},Fe=Oe,$e=(0,i.A)(Fe,we,Pe,!1,null,null,null),De=$e.exports;s["default"].use(p.Ay);const Ne=[{path:"/",name:"proxy",component:Y},{path:"/visit_logs",name:"visit_logs",component:le},{path:"/speed_logs",name:"speed_logs",component:ve},{path:"/ip_logs",name:"ip_logs",component:De}],Ee=new p.Ay({mode:"history",base:"/",routes:Ne});var je=Ee,Re=(r(9313),r(1501)),Te=r(7673);s["default"].config.productionTip=!1,s["default"].use(Re.vGs),s["default"].use(Te.YS),new s["default"]({router:je,render:e=>e(c)}).$mount("#app")}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,o){if(!s){var i=1/0;for(p=0;p<e.length;p++){s=e[p][0],a=e[p][1],o=e[p][2];for(var n=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every(function(e){return r.O[e](s[l])})?s.splice(l--,1):(n=!1,o<i&&(i=o));if(n){e.splice(p--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[s,a,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,i=s[0],n=s[1],l=s[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(a in n)r.o(n,a)&&(r.m[a]=n[a]);if(l)var p=l(r)}for(t&&t(s);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(p)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[504],function(){return r(7540)});s=r.O(s)})();
//# sourceMappingURL=app.dcf55883.js.map